# 规范数据库的设计



## 为什么需要设计数据库

当数据库比较复杂时，就需要设计数据库

1. 比较差的数据库设计：
   * 数据冗余，浪费空间
   * 自带物理外键，数据插入和删除麻烦（屏蔽物理外键）
   * 程序的性能差
2. 良好的数据库的设计
   * 节省内存空间
   * 保证数据库的完整性
   * 方便开发系统



**关于数据库的设计：**

1. 分析需求：分析业务和需要处理数据的数据库的需求
2. 概要设计：设计关系图 E-R 图



![image-20210814151526330](C:\Users\J-ADan\AppData\Roaming\Typora\typora-user-images\image-20210814151526330.png)



## 三大范式

**为什么要数据规范化**

* 信息重复
* 更新异常
* 插入异常
  * 无法正常显示信息
* 删除异常
  * 丢失有效的信息



### 第一范式（1NF）

要求数据库的表的每一列都是不可再分的原子数据项

**原子性：保证每一列不可再分**

### 第二范式（2NF）

前提：必须满足第一范式

在第一范式的基础之上，非码属性必须完全依赖于候选码（在第一范式的基础上消除非主属性对主码的部分函数依赖），第二范式需要确保数据库表中的每一列都和主键相关，而不是只与主键的某一部分相关

**每张表只描述一件事情**

### 第三范式（3NF）

前提：必须满足第一第二范式

在第二范式的基础上，任何非主属性不依赖于其他的非主属性（在第二范式的基础上消除传递依赖），第三范式需要确保数据表中的每一列数据都和主键直接相关，而不是间接相关。

**第三范式需要确保数据表中的每一列数据都和主键直接相关，而不是间接相关。**



### 规范性 和 性能 的问题

* 数据库的性能更加重要
* 性能问题解决的前提下，考虑一下规范性
* 故意增加一些冗余的字段（从多表查询改为单表查询）
* 故意增加一些计算列（从大数据量降低为小数据量查询）